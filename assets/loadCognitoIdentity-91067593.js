var me=Object.defineProperty;var he=(e,s,t)=>s in e?me(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t;var r=(e,s,t)=>(he(e,typeof s!="symbol"?s+"":s,t),t);import{c as xe,g as we,n as Ee,r as fe,b as ve,E as ge,d as Se,e as Pe,A as Ce,N as Ie,f as be,p as Re,h as Ae,i as ke,D as ze,j as _e,k as Fe,S as De,l as $e,m as Oe,o as Ne,q as Ue,t as He,u as Le,v as Te,w as Me,x as je,y as Ge,C as qe,z as Be,B as Ve,F as Je,G as We,H as Ke,I as Xe,J as Qe,K as Ye,L as Ze,M as et,O as tt,P as st,Q as nt,R as ot,T as it,U as A,V as h,W as rt,a as ee,X as te}from"./index-4401a95c.js";import{f as at,t as dt,a as ct,b as lt,F as pt,s as ut,H as yt,e as R,c as mt,p as ht,d as xt,g as se}from"./index-be7cf5e5.js";const ne=(e,s)=>{const t={};for(const n in s)wt(t,e,s,n);return t},wt=(e,s,t,n)=>{if(s!==null){let i=t[n];typeof i=="function"&&(i=[,i]);const[u=Et,w=ft,f=n]=i;(typeof u=="function"&&u(s[f])||typeof u!="function"&&u)&&(e[n]=w(s[f]));return}let[o,d]=t[n];if(typeof d=="function"){let i;const u=o===void 0&&(i=d())!=null,w=typeof o=="function"&&!!o(void 0)||typeof o!="function"&&!!o;u?e[n]=i:w&&(e[n]=d())}else{const i=o===void 0&&d!=null,u=typeof o=="function"&&!!o(d)||typeof o!="function"&&!!o;(i||u)&&(e[n]=d)}},Et=e=>e!=null,ft=e=>e,p=e=>{if(e==null)return{};if(Array.isArray(e))return e.filter(s=>s!=null).map(p);if(typeof e=="object"){const s={};for(const t of Object.keys(e))e[t]!=null&&(s[t]=p(e[t]));return s}return e},k=(e,s)=>xe(e,s).then(t=>{if(t.length)try{return JSON.parse(t)}catch(n){throw(n==null?void 0:n.name)==="SyntaxError"&&Object.defineProperty(n,"$responseBodyText",{value:t}),n}return{}}),vt=async(e,s)=>{const t=await k(e,s);return t.message=t.message??t.Message,t},gt=(e,s)=>{const t=(d,i)=>Object.keys(d).find(u=>u.toLowerCase()===i.toLowerCase()),n=d=>{let i=d;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},o=t(e.headers,"x-amzn-errortype");if(o!==void 0)return n(e.headers[o]);if(s.code!==void 0)return n(s.code);if(s.__type!==void 0)return n(s.__type)},St=async(e,s,t)=>({operation:we(s).operation,region:await Ee(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function Pt(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"cognito-identity",region:e.region},propertiesExtractor:(s,t)=>({signingProperties:{config:s,context:t}})}}function I(e){return{schemeId:"smithy.api#noAuth"}}const Ct=e=>{const s=[];switch(e.operation){case"GetCredentialsForIdentity":{s.push(I());break}case"GetId":{s.push(I());break}case"GetOpenIdToken":{s.push(I());break}case"UnlinkIdentity":{s.push(I());break}default:s.push(Pt(e))}return s},It=e=>({...fe(e)}),bt=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"cognito-identity"}),oe={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},Rt="@aws-sdk/client-cognito-identity",At="AWS SDK for JavaScript Cognito Identity Client for Node.js, Browser and React Native",kt="3.749.0",zt={build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-cognito-identity","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo cognito-identity","test:e2e":"yarn g:vitest run -c vitest.config.e2e.ts --mode development","test:e2e:watch":"yarn g:vitest watch -c vitest.config.e2e.ts"},_t="./dist-cjs/index.js",Ft="./dist-types/index.d.ts",Dt="./dist-es/index.js",$t=!1,Ot={"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.749.0","@aws-sdk/credential-provider-node":"3.749.0","@aws-sdk/middleware-host-header":"3.734.0","@aws-sdk/middleware-logger":"3.734.0","@aws-sdk/middleware-recursion-detection":"3.734.0","@aws-sdk/middleware-user-agent":"3.749.0","@aws-sdk/region-config-resolver":"3.734.0","@aws-sdk/types":"3.734.0","@aws-sdk/util-endpoints":"3.743.0","@aws-sdk/util-user-agent-browser":"3.734.0","@aws-sdk/util-user-agent-node":"3.749.0","@smithy/config-resolver":"^4.0.1","@smithy/core":"^3.1.3","@smithy/fetch-http-handler":"^5.0.1","@smithy/hash-node":"^4.0.1","@smithy/invalid-dependency":"^4.0.1","@smithy/middleware-content-length":"^4.0.1","@smithy/middleware-endpoint":"^4.0.4","@smithy/middleware-retry":"^4.0.5","@smithy/middleware-serde":"^4.0.2","@smithy/middleware-stack":"^4.0.1","@smithy/node-config-provider":"^4.0.1","@smithy/node-http-handler":"^4.0.2","@smithy/protocol-http":"^5.0.1","@smithy/smithy-client":"^4.1.4","@smithy/types":"^4.1.0","@smithy/url-parser":"^4.0.1","@smithy/util-base64":"^4.0.0","@smithy/util-body-length-browser":"^4.0.0","@smithy/util-body-length-node":"^4.0.0","@smithy/util-defaults-mode-browser":"^4.0.5","@smithy/util-defaults-mode-node":"^4.0.5","@smithy/util-endpoints":"^3.0.1","@smithy/util-middleware":"^4.0.1","@smithy/util-retry":"^4.0.1","@smithy/util-utf8":"^4.0.0",tslib:"^2.6.2"},Nt={"@aws-sdk/client-iam":"3.749.0","@tsconfig/node18":"18.2.4","@types/chai":"^4.2.11","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.2.2"},Ut={node:">=18.0.0"},Ht={"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},Lt=["dist-*/**"],Tt={name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},Mt="Apache-2.0",jt={"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},Gt="https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-cognito-identity",qt={type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-cognito-identity"},Bt={name:Rt,description:At,version:kt,scripts:zt,main:_t,types:Ft,module:Dt,sideEffects:$t,dependencies:Ot,devDependencies:Nt,engines:Ut,typesVersions:Ht,files:Lt,author:Tt,license:Mt,browser:jt,"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:Gt,repository:qt},ie="required",c="fn",l="argv",g="ref",q=!0,B="isSet",C="booleanEquals",v="error",x="endpoint",E="tree",z="PartitionResult",_="getAttr",S="stringEquals",V={[ie]:!1,type:"String"},J={[ie]:!0,default:!1,type:"Boolean"},W={[g]:"Endpoint"},re={[c]:C,[l]:[{[g]:"UseFIPS"},!0]},ae={[c]:C,[l]:[{[g]:"UseDualStack"},!0]},a={},P={[g]:"Region"},K={[c]:_,[l]:[{[g]:z},"supportsFIPS"]},de={[g]:z},X={[c]:C,[l]:[!0,{[c]:_,[l]:[de,"supportsDualStack"]}]},Q=[re],Y=[ae],Z=[P],Vt={version:"1.0",parameters:{Region:V,UseDualStack:J,UseFIPS:J,Endpoint:V},rules:[{conditions:[{[c]:B,[l]:[W]}],rules:[{conditions:Q,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:v},{conditions:Y,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:v},{endpoint:{url:W,properties:a,headers:a},type:x}],type:E},{conditions:[{[c]:B,[l]:Z}],rules:[{conditions:[{[c]:"aws.partition",[l]:Z,assign:z}],rules:[{conditions:[re,ae],rules:[{conditions:[{[c]:C,[l]:[q,K]},X],rules:[{conditions:[{[c]:S,[l]:[P,"us-east-1"]}],endpoint:{url:"https://cognito-identity-fips.us-east-1.amazonaws.com",properties:a,headers:a},type:x},{conditions:[{[c]:S,[l]:[P,"us-east-2"]}],endpoint:{url:"https://cognito-identity-fips.us-east-2.amazonaws.com",properties:a,headers:a},type:x},{conditions:[{[c]:S,[l]:[P,"us-west-1"]}],endpoint:{url:"https://cognito-identity-fips.us-west-1.amazonaws.com",properties:a,headers:a},type:x},{conditions:[{[c]:S,[l]:[P,"us-west-2"]}],endpoint:{url:"https://cognito-identity-fips.us-west-2.amazonaws.com",properties:a,headers:a},type:x},{endpoint:{url:"https://cognito-identity-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:a,headers:a},type:x}],type:E},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:v}],type:E},{conditions:Q,rules:[{conditions:[{[c]:C,[l]:[K,q]}],rules:[{endpoint:{url:"https://cognito-identity-fips.{Region}.{PartitionResult#dnsSuffix}",properties:a,headers:a},type:x}],type:E},{error:"FIPS is enabled but this partition does not support FIPS",type:v}],type:E},{conditions:Y,rules:[{conditions:[X],rules:[{conditions:[{[c]:S,[l]:["aws",{[c]:_,[l]:[de,"name"]}]}],endpoint:{url:"https://cognito-identity.{Region}.amazonaws.com",properties:a,headers:a},type:x},{endpoint:{url:"https://cognito-identity.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:a,headers:a},type:x}],type:E},{error:"DualStack is enabled but this partition does not support DualStack",type:v}],type:E},{endpoint:{url:"https://cognito-identity.{Region}.{PartitionResult#dnsSuffix}",properties:a,headers:a},type:x}],type:E}],type:E},{error:"Invalid Configuration: Missing Region",type:v}]},Jt=Vt,Wt=new ge({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),Kt=(e,s={})=>Wt.get(e,()=>ve(Jt,{endpointParams:e,logger:s.logger}));Se.aws=Pe;const Xt=e=>({apiVersion:"2014-06-30",base64Decoder:(e==null?void 0:e.base64Decoder)??at,base64Encoder:(e==null?void 0:e.base64Encoder)??dt,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??Kt,extensions:(e==null?void 0:e.extensions)??[],httpAuthSchemeProvider:(e==null?void 0:e.httpAuthSchemeProvider)??Ct,httpAuthSchemes:(e==null?void 0:e.httpAuthSchemes)??[{schemeId:"aws.auth#sigv4",identityProvider:s=>s.getIdentityProvider("aws.auth#sigv4"),signer:new Ce},{schemeId:"smithy.api#noAuth",identityProvider:s=>s.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Ie}],logger:(e==null?void 0:e.logger)??new be,serviceId:(e==null?void 0:e.serviceId)??"Cognito Identity",urlParser:(e==null?void 0:e.urlParser)??Re,utf8Decoder:(e==null?void 0:e.utf8Decoder)??ct,utf8Encoder:(e==null?void 0:e.utf8Encoder)??lt}),Qt=e=>{const s=Ne(e),t=()=>s().then(Ue),n=Xt(e);return{...n,...e,runtime:"browser",defaultsMode:s,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??Ae,credentialDefaultProvider:(e==null?void 0:e.credentialDefaultProvider)??(o=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??ke({serviceId:n.serviceId,clientVersion:Bt.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??ze,region:(e==null?void 0:e.region)??_e("Region is missing"),requestHandler:pt.create((e==null?void 0:e.requestHandler)??t),retryMode:(e==null?void 0:e.retryMode)??(async()=>(await t()).retryMode||Fe),sha256:(e==null?void 0:e.sha256)??De,streamCollector:(e==null?void 0:e.streamCollector)??ut,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??(()=>Promise.resolve($e)),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??(()=>Promise.resolve(Oe))}},Yt=e=>{const s=e.httpAuthSchemes;let t=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(o){const d=s.findIndex(i=>i.schemeId===o.schemeId);d===-1?s.push(o):s.splice(d,1,o)},httpAuthSchemes(){return s},setHttpAuthSchemeProvider(o){t=o},httpAuthSchemeProvider(){return t},setCredentials(o){n=o},credentials(){return n}}},Zt=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),b=e=>e,es=(e,s)=>{const t={...b(Ge(e)),...b(He(e)),...b(Le(e)),...b(Yt(e))};return s.forEach(n=>n.configure(t)),{...e,...Te(t),...Me(t),...je(t),...Zt(t)}};class bs extends qe{constructor(...[t]){const n=Qt(t||{}),o=bt(n),d=Be(o),i=Ve(d),u=Je(i),w=ot(u),f=We(w),ue=It(f),G=es(ue,(t==null?void 0:t.extensions)||[]);super(G);r(this,"config");this.config=G,this.middlewareStack.use(Ke(this.config)),this.middlewareStack.use(Xe(this.config)),this.middlewareStack.use(Qe(this.config)),this.middlewareStack.use(Ye(this.config)),this.middlewareStack.use(Ze(this.config)),this.middlewareStack.use(et(this.config)),this.middlewareStack.use(tt(this.config,{httpAuthSchemeParametersProvider:St,identityProviderConfigProvider:async ye=>new st({"aws.auth#sigv4":ye.credentials})})),this.middlewareStack.use(nt(this.config))}destroy(){super.destroy()}}class y extends it{constructor(s){super(s),Object.setPrototypeOf(this,y.prototype)}}class F extends y{constructor(t){super({name:"InternalErrorException",$fault:"server",...t});r(this,"name","InternalErrorException");r(this,"$fault","server");Object.setPrototypeOf(this,F.prototype)}}class D extends y{constructor(t){super({name:"InvalidParameterException",$fault:"client",...t});r(this,"name","InvalidParameterException");r(this,"$fault","client");Object.setPrototypeOf(this,D.prototype)}}class $ extends y{constructor(t){super({name:"LimitExceededException",$fault:"client",...t});r(this,"name","LimitExceededException");r(this,"$fault","client");Object.setPrototypeOf(this,$.prototype)}}class O extends y{constructor(t){super({name:"NotAuthorizedException",$fault:"client",...t});r(this,"name","NotAuthorizedException");r(this,"$fault","client");Object.setPrototypeOf(this,O.prototype)}}class N extends y{constructor(t){super({name:"ResourceConflictException",$fault:"client",...t});r(this,"name","ResourceConflictException");r(this,"$fault","client");Object.setPrototypeOf(this,N.prototype)}}class U extends y{constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t});r(this,"name","TooManyRequestsException");r(this,"$fault","client");Object.setPrototypeOf(this,U.prototype)}}class H extends y{constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t});r(this,"name","ResourceNotFoundException");r(this,"$fault","client");Object.setPrototypeOf(this,H.prototype)}}class L extends y{constructor(t){super({name:"ExternalServiceException",$fault:"client",...t});r(this,"name","ExternalServiceException");r(this,"$fault","client");Object.setPrototypeOf(this,L.prototype)}}class T extends y{constructor(t){super({name:"InvalidIdentityPoolConfigurationException",$fault:"client",...t});r(this,"name","InvalidIdentityPoolConfigurationException");r(this,"$fault","client");Object.setPrototypeOf(this,T.prototype)}}class M extends y{constructor(t){super({name:"DeveloperUserAlreadyRegisteredException",$fault:"client",...t});r(this,"name","DeveloperUserAlreadyRegisteredException");r(this,"$fault","client");Object.setPrototypeOf(this,M.prototype)}}class j extends y{constructor(t){super({name:"ConcurrentModificationException",$fault:"client",...t});r(this,"name","ConcurrentModificationException");r(this,"$fault","client");Object.setPrototypeOf(this,j.prototype)}}const ts=e=>({...e,...e.Logins&&{Logins:A}}),ss=e=>({...e,...e.SecretKey&&{SecretKey:A}}),ns=e=>({...e,...e.Credentials&&{Credentials:ss(e.Credentials)}}),os=e=>({...e,...e.Logins&&{Logins:A}}),is=async(e,s)=>{const t=pe("GetCredentialsForIdentity");let n;return n=JSON.stringify(p(e)),le(s,t,"/",void 0,n)},rs=async(e,s)=>{const t=pe("GetId");let n;return n=JSON.stringify(p(e)),le(s,t,"/",void 0,n)},as=async(e,s)=>{if(e.statusCode>=300)return ce(e,s);const t=await k(e.body,s);let n={};return n=gs(t),{$metadata:m(e),...n}},ds=async(e,s)=>{if(e.statusCode>=300)return ce(e,s);const t=await k(e.body,s);let n={};return n=p(t),{$metadata:m(e),...n}},ce=async(e,s)=>{const t={...e,body:await vt(e.body,s)},n=gt(e,t.body);switch(n){case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":throw await us(t);case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":throw await ms(t);case"LimitExceededException":case"com.amazonaws.cognitoidentity#LimitExceededException":throw await hs(t);case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":throw await xs(t);case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":throw await ws(t);case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":throw await fs(t);case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":throw await Es(t);case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":throw await ps(t);case"InvalidIdentityPoolConfigurationException":case"com.amazonaws.cognitoidentity#InvalidIdentityPoolConfigurationException":throw await ys(t);case"DeveloperUserAlreadyRegisteredException":case"com.amazonaws.cognitoidentity#DeveloperUserAlreadyRegisteredException":throw await ls(t);case"ConcurrentModificationException":case"com.amazonaws.cognitoidentity#ConcurrentModificationException":throw await cs(t);default:const o=t.body;return Ss({output:e,parsedBody:o,errorCode:n})}},cs=async(e,s)=>{const t=e.body,n=p(t),o=new j({$metadata:m(e),...n});return h(o,t)},ls=async(e,s)=>{const t=e.body,n=p(t),o=new M({$metadata:m(e),...n});return h(o,t)},ps=async(e,s)=>{const t=e.body,n=p(t),o=new L({$metadata:m(e),...n});return h(o,t)},us=async(e,s)=>{const t=e.body,n=p(t),o=new F({$metadata:m(e),...n});return h(o,t)},ys=async(e,s)=>{const t=e.body,n=p(t),o=new T({$metadata:m(e),...n});return h(o,t)},ms=async(e,s)=>{const t=e.body,n=p(t),o=new D({$metadata:m(e),...n});return h(o,t)},hs=async(e,s)=>{const t=e.body,n=p(t),o=new $({$metadata:m(e),...n});return h(o,t)},xs=async(e,s)=>{const t=e.body,n=p(t),o=new O({$metadata:m(e),...n});return h(o,t)},ws=async(e,s)=>{const t=e.body,n=p(t),o=new N({$metadata:m(e),...n});return h(o,t)},Es=async(e,s)=>{const t=e.body,n=p(t),o=new H({$metadata:m(e),...n});return h(o,t)},fs=async(e,s)=>{const t=e.body,n=p(t),o=new U({$metadata:m(e),...n});return h(o,t)},vs=(e,s)=>ne(e,{AccessKeyId:R,Expiration:t=>mt(ht(xt(t))),SecretKey:R,SessionToken:R}),gs=(e,s)=>ne(e,{Credentials:t=>vs(t),IdentityId:R}),m=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),Ss=rt(y),le=async(e,s,t,n,o)=>{const{hostname:d,protocol:i="https",port:u,path:w}=await e.endpoint(),f={protocol:i,hostname:d,port:u,method:"POST",path:w.endsWith("/")?w.slice(0,-1)+t:w+t,headers:s};return n!==void 0&&(f.hostname=n),o!==void 0&&(f.body=o),new yt(f)};function pe(e){return{"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityService.${e}`}}class Rs extends ee.classBuilder().ep(oe).m(function(s,t,n,o){return[se(n,this.serialize,this.deserialize),te(n,s.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","GetCredentialsForIdentity",{}).n("CognitoIdentityClient","GetCredentialsForIdentityCommand").f(ts,ns).ser(is).de(as).build(){}class As extends ee.classBuilder().ep(oe).m(function(s,t,n,o){return[se(n,this.serialize,this.deserialize),te(n,s.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","GetId",{}).n("CognitoIdentityClient","GetIdCommand").f(os,void 0).ser(rs).de(ds).build(){}export{bs as CognitoIdentityClient,Rs as GetCredentialsForIdentityCommand,As as GetIdCommand};
